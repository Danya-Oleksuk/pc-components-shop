{% extends "base.html" %}
{% load static i18n %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'css/products/product-detail.css' %}">
{% endblock %}

{% block content %}
<div class="container product-detail-container">
    <a href="{{ back_url }}" class="back-btn mb-4">
        <i class="bi bi-arrow-left-short fs-4"></i>
        <span class="ms-2">{% trans "–ù–∞–∑–∞–¥" %}</span>
    </a>
    {% if product and not not_available %}
        <div class="row g-5">
            <div class="col-lg-6">
                {% if product.image %}
                    <img src="{{ product.image.url }}" class="product-image" alt="{{ product.name }}">
                {% else %}
                    <img src="https://via.placeholder.com/600" class="product-image" alt="{% trans '–ù–µ–º–∞—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è' %}">
                {% endif %}
            </div>

            <div class="col-lg-6">
                <div class="d-flex align-items-center justify-content-between mb-2">
                    <h1 class="fw-bold mb-0">{{ product.name }}</h1>

                    {% if user.is_authenticated %}
                        {% if product.id in wishlist_products %}
                            <a href="{% url 'products:remove_from_wishlist' product.id %}"
                               class="btn btn-outline-danger btn-sm">
                               ‚ù§Ô∏è {% trans "–í–∏–¥–∞–ª–∏—Ç–∏ –∑ –≤–∏–±—Ä–∞–Ω–æ–≥–æ" %}
                            </a>
                        {% else %}
                            <a href="{% url 'products:add_to_wishlist' product.id %}"
                               class="btn btn-outline-danger btn-sm">
                               ü§ç {% trans "–î–æ–¥–∞—Ç–∏ –≤ –≤–∏–±—Ä–∞–Ω–µ" %}
                            </a>
                        {% endif %}
                    {% endif %}
                </div>

                <div class="price-tag mb-3">{{ product.price }} {% trans "–≥—Ä–Ω" %}</div>

                <div class="description mb-4">
                    <h5 class="mb-2">{% trans "–û–ø–∏—Å —Ç–æ–≤–∞—Ä—É" %}</h5>
                    <p>{{ product.description }}</p>
                </div>

                <div class="specifications">
                    <h5 class="mb-3">{% trans "–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏" %}</h5>
                    <ul class="specs-list">
                        <li>
                            <span>{% trans "–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:" %}</span>
                            <a href="{% url 'products:catalog' %}?category={{ product.category.name }}" class="category-link">
                                <span>{{ product.category.name }}</span>
                            </a>
                        </li>
                        {% for spec in specs %}
                        <li>
                            <span>{{ spec.spec_name }}</span>
                            <span>{{ spec.spec_value }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="mt-4">
                    <a href="{% if user.is_authenticated %}{% url 'cart:cart_add' product.id %}{% else %}{% url 'users:login' %}{% endif %}"
                       class="btn btn-primary add-to-cart w-100"
                       onclick="event.stopPropagation()">
                       {% trans "–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É" %}
                    </a>
                </div>
            </div>
        </div>
    {% else %}
        <div class="row justify-content-center">
            <div class="col-md-8 text-center">
                <div class="alert alert-warning">
                    <h2 class="fw-bold">{% trans "–ü—Ä–æ–¥—É–∫—Ç —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π" %}</h2>
                    <p class="lead">{% trans "–¶–µ–π —Ç–æ–≤–∞—Ä –Ω–∞—Ä–∞–∑—ñ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –¥–ª—è –ø–æ–∫—É–ø–∫–∏. –í–∏–±–∞—á—Ç–µ –∑–∞ –Ω–µ–∑—Ä—É—á–Ω–æ—Å—Ç—ñ." %}</p>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
